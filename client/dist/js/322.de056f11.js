"use strict";(self["webpackChunkclient"]=self["webpackChunkclient"]||[]).push([[322],{11418:function(t,e,s){s.d(e,{Z:function(){return o}});var a=s(48085),o=a.Z.extend({name:"v-divider",props:{inset:Boolean,vertical:Boolean},render(t){let e;return this.$attrs.role&&"separator"!==this.$attrs.role||(e=this.vertical?"vertical":"horizontal"),t("hr",{class:{"v-divider":!0,"v-divider--inset":this.inset,"v-divider--vertical":this.vertical,...this.themeClasses},attrs:{role:"separator","aria-orientation":e,...this.$attrs},on:this.$listeners})}})},99762:function(t,e,s){s(68582);var a=s(4589);e["Z"]=(0,a.Ji)("spacer","div","v-spacer")},96428:function(t,e,s){s.d(e,{Z:function(){return u}});s(26699);var a,o=s(66210),r=s(46952),i=s(19131),l=s(48085),n=s(4589),c=s(20144),d=s(73325);function h(t){return["fas","far","fal","fab","fad","fak"].some((e=>t.includes(e)))}function p(t){return/^[mzlhvcsqta]\s*[-+.0-9][^mlhvzcsqta]+/i.test(t)&&/[\dz]$/i.test(t)&&t.length>4}(function(t){t["xSmall"]="12px",t["small"]="16px",t["default"]="24px",t["medium"]="28px",t["large"]="36px",t["xLarge"]="40px"})(a||(a={}));const v=(0,d.Z)(o.Z,r.Z,i.Z,l.Z).extend({name:"v-icon",props:{dense:Boolean,disabled:Boolean,left:Boolean,right:Boolean,size:[Number,String],tag:{type:String,required:!1,default:"i"}},computed:{medium(){return!1},hasClickListener(){return Boolean(this.listeners$.click||this.listeners$["!click"])}},methods:{getIcon(){let t="";return this.$slots.default&&(t=this.$slots.default[0].text.trim()),(0,n.RB)(this,t)},getSize(){const t={xSmall:this.xSmall,small:this.small,medium:this.medium,large:this.large,xLarge:this.xLarge},e=(0,n.XP)(t).find((e=>t[e]));return e&&a[e]||(0,n.kb)(this.size)},getDefaultData(){return{staticClass:"v-icon notranslate",class:{"v-icon--disabled":this.disabled,"v-icon--left":this.left,"v-icon--link":this.hasClickListener,"v-icon--right":this.right,"v-icon--dense":this.dense},attrs:{"aria-hidden":!this.hasClickListener,disabled:this.hasClickListener&&this.disabled,type:this.hasClickListener?"button":void 0,...this.attrs$},on:this.listeners$}},getSvgWrapperData(){const t=this.getSize(),e={...this.getDefaultData(),style:t?{fontSize:t,height:t,width:t}:void 0};return this.applyColors(e),e},applyColors(t){t.class={...t.class,...this.themeClasses},this.setTextColor(this.color,t)},renderFontIcon(t,e){const s=[],a=this.getDefaultData();let o="material-icons";const r=t.indexOf("-"),i=r<=-1;i?s.push(t):(o=t.slice(0,r),h(o)&&(o="")),a.class[o]=!0,a.class[t]=!i;const l=this.getSize();return l&&(a.style={fontSize:l}),this.applyColors(a),e(this.hasClickListener?"button":this.tag,a,s)},renderSvgIcon(t,e){const s={class:"v-icon__svg",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",role:"img","aria-hidden":!0}},a=this.getSize();return a&&(s.style={fontSize:a,height:a,width:a}),e(this.hasClickListener?"button":"span",this.getSvgWrapperData(),[e("svg",s,[e("path",{attrs:{d:t}})])])},renderSvgIconComponent(t,e){const s={class:{"v-icon__component":!0}},a=this.getSize();a&&(s.style={fontSize:a,height:a,width:a}),this.applyColors(s);const o=t.component;return s.props=t.props,s.nativeOn=s.on,e(this.hasClickListener?"button":"span",this.getSvgWrapperData(),[e(o,s)])}},render(t){const e=this.getIcon();return"string"===typeof e?p(e)?this.renderSvgIcon(e,t):this.renderFontIcon(e,t):this.renderSvgIconComponent(e,t)}});var u=c.Z.extend({name:"v-icon",$_wrapperFor:v,functional:!0,render(t,{data:e,children:s}){let a="";return e.domProps&&(a=e.domProps.textContent||e.domProps.innerHTML||a,delete e.domProps.textContent,delete e.domProps.innerHTML),t(v,e,a?[a]:s)}})},49301:function(t,e,s){s.r(e),s.d(e,{default:function(){return E}});var a=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",{staticClass:"container"},[a("v-container",{staticClass:"margin"},[a("v-card",[a("h4",[t._v("Lote: "+t._s(void 0!=t.proceso.envasado?t.proceso.envasado.nro_lote:"Cargando.."))]),a("h5",[t._v("Nro. Botellas producidas: "+t._s(void 0!=t.proceso.envasado?t.proceso.envasado.nro_botellas:"Cargando..")+" ")]),a("v-card-title",[a("h6",[t._v("Nro. Botellas especiales: "+t._s(t.botellas.length))]),a("v-spacer"),a("h6",[t._v("Nro. Botellas vendidas: "+t._s(t.getBotellasVendidas()))]),a("v-spacer"),a("h6",[t._v("Nro. Tokens asignados: "+t._s(t.getTokensAsignados()))]),a("v-spacer"),a("v-btn",{attrs:{color:"green",outlined:""},on:{click:function(e){return t.generarPdf()}}},[t._v(" Imprimir "),a("v-btn",{attrs:{icon:"",color:"green"}},[a("v-icon",[t._v("mdi-cloud-print-outline")])],1)],1)],1),a("v-divider"),a("v-container",[a("v-container",{staticClass:"fill-height",staticStyle:{"min-height":"434px"},attrs:{fluid:""}},[a("v-fade-transition",{attrs:{mode:"out-in"}},[a("v-row",t._l(t.botellas,(function(e,o){return a("v-col",{key:o,staticClass:"d-flex align-content-end flex-wrap",attrs:{cols:"12",sm:"12",md:"3"}},[a("v-card",{staticStyle:{padding:"10px"},on:{click:function(s){return t.encontrarBotella(e.botella)}}},[a("center",[a("v-img",{staticStyle:{"align-items":"center"},attrs:{src:s(42834),"max-width":"60"}},[a("vue-qr",{staticClass:"vue-qr",staticStyle:{"margin-top":"30px"},attrs:{text:t.path_qr+e.botella._id,size:50}})],1)],1),a("br"),t._v(" Nro botella: "+t._s(o+1)+" "),a("div",{staticStyle:{"font-size":"12px"}},[t._v(" Hash: 0x"+t._s(e.botella._id))]),a("div",{staticStyle:{"font-size":"10px"}},[1==e.botella.estados.length?a("div",[a("em",{staticStyle:{color:"red"}},[t._v(t._s(e.botella.estados[0].estado))])]):t._e(),2==e.botella.estados.length?a("div",[a("em",{staticStyle:{color:"red"}},[t._v(t._s(e.botella.estados[0].estado))]),t._v(", "),a("em",{staticStyle:{color:"green"}},[t._v(t._s(e.botella.estados[1].estado))])]):t._e(),3==e.botella.estados.length?a("div",[a("em",{staticStyle:{color:"red"}},[t._v(t._s(e.botella.estados[0].estado))]),t._v(", "),a("em",{staticStyle:{color:"green"}},[t._v(t._s(e.botella.estados[1].estado))]),t._v(", "),a("em",{staticStyle:{color:"orange"}},[t._v(t._s(e.botella.estados[2].estado))])]):t._e()])],1)],1)})),1)],1)],1),a("v-dialog",{attrs:{persistent:"",scrollable:""},model:{value:t.dialog_item,callback:function(e){t.dialog_item=e},expression:"dialog_item"}},[a("v-card",{staticStyle:{padding:"20px"}},[a("v-card-text",[a("InfoBotella",{attrs:{items:t.items,botella:t.botella,proceso:t.proceso,tipo:0},on:{"update:botella":function(e){t.botella=e}}})],1),a("br"),a("br"),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{dark:"",color:"secondary_app"},on:{click:function(e){t.dialog_item=!1}}},[t._v(" CERRAR ")])],1)],1)],1),a("vue-html2pdf",{ref:"html2Pdf",attrs:{"show-layout":!1,"float-layout":!0,"enable-download":!1,"preview-modal":!0,filename:"Qr de botellas ","pdf-quality":2,"manual-pagination":!0,"pdf-format":"a4","pdf-orientation":"portrait","pdf-content-width":"800px"}},[a("section",{attrs:{slot:"pdf-content"},slot:"pdf-content"},[a("ImprimirQr",{attrs:{proceso:t.proceso,botellas:t.botellas}})],1)])],1)],1)],1),a("CargandoVista",{attrs:{cargando_tipo:t.cargando_tipo}})],1)},o=[],r=s(84588),i=s.n(r),l=s(32074),n=s(62579),c=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("section",[s("v-card",[s("v-card-title",[s("h6",[t._v("Lote: "+t._s(void 0!=t.proceso.envasado?t.proceso.envasado.nro_lote:""))]),s("v-spacer"),s("h6",[t._v("Nro. Botellas especiales: "+t._s(t.botellas.length))]),s("v-spacer"),s("h6",[t._v("Nro. Botellas producidas: "+t._s(void 0!=t.proceso.envasado?t.proceso.envasado.nro_botellas:"")+" ")])],1),s("v-divider"),s("v-container",t._l(t.botellas,(function(e,a){return s("div",{key:a},[s("table",[a%4==0?s("tr",[s("td",[s("center",[s("vue-qr",{staticClass:"vue-qr",attrs:{text:t.path_qr+t.botellas[a].botella._id,size:190}})],1)],1),a+1<t.botellas.length?s("td",[s("center",[s("vue-qr",{staticClass:"vue-qr",attrs:{text:t.path_qr+t.botellas[a+1].botella._id,size:190}})],1)],1):t._e(),a+2<t.botellas.length?s("td",[s("center",[s("vue-qr",{staticClass:"vue-qr",attrs:{text:t.path_qr+t.botellas[a+2].botella._id,size:190}})],1)],1):t._e(),a+3<t.botellas.length?s("td",[s("center",[s("vue-qr",{staticClass:"vue-qr",attrs:{text:t.path_qr+t.botellas[a+3].botella._id,size:190}})],1)],1):t._e()]):t._e()]),(a+1)%20==0&&a+1!=t.botellas.length?s("div",[s("div",{staticStyle:{display:"block","page-break-before":"always"}}),s("br")]):t._e()])})),0)],1)],1)},d=[],h=s(82065),p={name:"imprimirQr",components:{VueQr:i()},data:()=>({path_qr:""}),props:{proceso:[Object],botellas:[Array]},methods:{},async mounted(){this.path_qr=h.Z.path_qr}},v=p,u=s(1001),g=s(43453),m=s.n(g),_=s(53237),f=s(37118),b=s(4228),y=s(11418),C=s(99762),x=(0,u.Z)(v,c,d,!1,null,"4546eefa",null),S=x.exports;m()(x,{VCard:_.Z,VCardTitle:f.EB,VContainer:b.Z,VDivider:y.Z,VSpacer:C.Z});var Z=s(54637),k=s(22893),B=s(48941),V=s(26702),q={name:"Botellas_Envasado",components:{VueQr:i(),VueHtml2pdf:l.Z,InfoBotella:n.Z,CargandoVista:Z.Z,ImprimirQr:S},data:()=>({dialog_item:!1,items:[],botella:null,proceso:{},botellas:[],path_qr:"",cargando_tipo:!1,usuario:{}}),props:{hash:[String]},methods:{generarPdf(){this.$refs.html2Pdf.generatePdf()},getBotellasVendidas(){var t=this.botellas.filter((t=>t.botella.estados.length>1));return t.length},getTokensAsignados(){var t=this.botellas.filter((t=>t.botella.estados.length>2));return t.length},async encontrarBotella(t){try{this.botella=t,this.dialog_item=!0}catch(e){this.$toast.open({message:"Error al generar botella",type:"error",duration:5e3,position:"top-right",pauseOnHover:!0})}},async listaBotellas(t){this.cargando_tipo=!0,V.Z.listar_botella(t,(async t=>{"success"==t.tipo?this.botellas=t.data.botellas:this.$toast.open({message:t.mensaje,type:t.tipo,duration:5e3,position:"top-right",pauseOnHover:!0}),this.cargando_tipo=!1}))},async generarProceso(t){V.Z.encontrar_proceso(t,(async t=>{if("success"==t.tipo){var e=await(0,B.O)(t.data);this.items=e.items.reverse(),this.proceso=e.proceso}else this.$toast.open({message:t.mensaje,type:t.tipo,duration:5e3,position:"top-right",pauseOnHover:!0})}))}},async mounted(){this.generarProceso(this.hash),this.listaBotellas(this.hash),this.path_qr=h.Z.path_qr;try{this.usuario=await(0,k.Z)()??{}}catch(t){console.log(t)}}},w=q,z=s(680),$=s(82102),I=s(4497),L=s(85827),P=s(96428),D=s(97047),T=s(62877),N=(0,u.Z)(w,a,o,!1,null,"29475ea0",null),E=N.exports;m()(N,{VBtn:z.Z,VCard:_.Z,VCardActions:f.h7,VCardText:f.ZB,VCardTitle:f.EB,VCol:$.Z,VContainer:b.Z,VDialog:I.Z,VDivider:y.Z,VFadeTransition:L.Z5,VIcon:P.Z,VImg:D.Z,VRow:T.Z,VSpacer:C.Z})}}]);
//# sourceMappingURL=322.de056f11.js.map